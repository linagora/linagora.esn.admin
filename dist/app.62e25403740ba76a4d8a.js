!function(n){var e={};function a(t){if(e[t])return e[t].exports;var i=e[t]={i:t,l:!1,exports:{}};return n[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=n,a.c=e,a.d=function(n,e,t){a.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,e){if(1&e&&(n=a(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)a.d(t,i,function(e){return n[e]}.bind(null,i));return t},a.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(e,"a",e),e},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a.p="",a(a.s=0)}({"+89K":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminAutoconfSubheader",{templateUrl:"/admin/app/autoconf/subheader/admin-autoconf-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}(angular)},"+TUx":function(n,e){!function(n){"use strict";function e(n){var e=this;e.$onInit=function(){e.ADMIN_TECHNICAL_USER_TYPES=n,e.technicalUser=function(n){if(!n)return!1;var e=Object.keys(n.data).map((function(e){return{key:e,value:n.data[e]}}));return n.data=e,n}(e.technicalUser)||{name:"",type:"",description:"",data:[{key:"",value:""}]},e.ADMIN_TECHNICAL_USER_TYPES=n},e.onAddBtnClick=function(){e.technicalUser.data.push({key:"",value:""})},e.onRemoveBtnClick=function(n){e.technicalUser.data.splice(n,1)}}e.$inject=["ADMIN_TECHNICAL_USER_TYPES"],n.module("linagora.esn.admin").controller("adminTechnicalUsersFormController",e)}(angular)},"+VnC":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminMail",{templateUrl:"/admin/app/mail/admin-mail.html",controller:"adminMailController"})},"+ZVw":function(n,e){!function(n){function e(n,e,a,t){return{getCurrentMode:function(){return i()?t.platform:t.domain},isDomainMode:function(){return!i()},isPlatformMode:i,goToDomainMode:function(){var n=a.domain._id;return e.go("admin.domain",{domainId:n})},goToPlatformMode:function(){return e.go("admin.domain",{domainId:t.platform})}};function i(){return n.domainId===t.platform}}e.$inject=["$stateParams","$state","session","ADMIN_MODE"],n.module("linagora.esn.admin").factory("adminModeService",e)}(angular)},"/LBr":function(n,e){!function(n){"use strict";function e(e,a,t,i){var o=this;function r(e){return n.copy(t).filter((function(n){return n.displayIn[e]}))}o.$onInit=function(){o.displayIn=a.isPlatformMode?i.platform:i.domain,o.platformPages=r(i.platform),o.domainPages=r(i.domain),e.$watch((function(){return a.isPlatformMode()}),(function(n){o.displayIn=n?i.platform:i.domain}))}}e.$inject=["$scope","adminModeService","ADMIN_PAGES","ADMIN_MODE"],n.module("linagora.esn.admin").component("adminSidebar",{templateUrl:"/admin/app/sidebar/admin-sidebar.html",controller:e})}(angular)},"/Pp4":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminLdapSubheader",{templateUrl:"/admin/app/ldap/admin-ldap-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})},"/THe":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminUsers",{templateUrl:"/admin/app/users/admin-users.html",controller:"adminUsersController"})},"/Yqt":function(n,e,a){"use strict";angular.module("linagora.esn.admin").factory("adminRestangular",["Restangular","httpErrorHandler",function(n,e){return n.withConfig((function(n){n.setFullResponse(!0),n.setBaseUrl("/admin/api"),n.setErrorInterceptor((function(n){return 401===n.status&&e.redirectToLogin(),!0}))}))}])},"/dM/":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminSessionSubheader",{templateUrl:"/admin/app/session/admin-session-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}(angular)},0:function(n,e,a){a("9kT/"),a("VTQ0"),a("VH2o"),a("0ykG"),a("pGMC"),a("geSO"),a("ifw2"),a("G+nh"),a("+89K"),a("zWzc"),a("/Yqt"),a("a7nP"),a("pmPi"),a("INMZ"),a("R5v2"),a("WFW2"),a("lr4A"),a("mVBp"),a("tSnq"),a("5U5W"),a("+ZVw"),a("MoM/"),a("IKzw"),a("ad0f"),a("iFuT"),a("2hGZ"),a("JSsL"),a("el6p"),a("ozOz"),a("nMuy"),a("IjmI"),a("msIs"),a("mODZ"),a("u+Fj"),a("sEeI"),a("KhWA"),a("35QM"),a("Z9hQ"),a("Q2ij"),a("Vk2m"),a("XXXm"),a("EqRw"),a("6+fd"),a("D1bG"),a("3SBb"),a("ZrAB"),a("9GPS"),a("k7eI"),a("xiTc"),a("ejW9"),a("ozb1"),a("DpBT"),a("bZzY"),a("FcHZ"),a("jtFP"),a("ETZY"),a("ILx4"),a("/Pp4"),a("MCB7"),a("r98x"),a("HoFI"),a("Ziv5"),a("wm4x"),a("RXMl"),a("wHVt"),a("VNPO"),a("+VnC"),a("mDy4"),a("yILD"),a("ZR1u"),a("50JM"),a("Vg31"),a("tScq"),a("tdrT"),a("eD0p"),a("WiSe"),a("t7L5"),a("577e"),a("XYZU"),a("Bekw"),a("2gfp"),a("tQkD"),a("4SGr"),a("CjI6"),a("bk53"),a("L3oH"),a("7eR2"),a("4uqE"),a("tn0S"),a("kEsG"),a("exUP"),a("Zzxw"),a("cwLY"),a("OgTm"),a("gTlB"),a("L7ZJ"),a("oRmL"),a("PX9m"),a("iBsm"),a("ByUy"),a("ZfvR"),a("srJ3"),a("6KCv"),a("VJ1c"),a("y5nE"),a("Zm9s"),a("Un5k"),a("s1if"),a("7CDp"),a("Rb2V"),a("acNZ"),a("J2af"),a("m0lg"),a("KKP2"),a("/dM/"),a("sE2v"),a("jEzJ"),a("/LBr"),a("5Sbp"),a("Rtr3"),a("J0ns"),a("33Cd"),a("SOSo"),a("G1+f"),a("Qhg+"),a("VRg+"),a("VWOR"),a("bS2D"),a("1Rjl"),a("+TUx"),a("aHSY"),a("xsJv"),a("p8TH"),a("QXIX"),a("ROBL"),a("1cdN"),a("EbGj"),a("U8w0"),a("fgJ2"),a("1Xwr"),a("imgl"),a("f887"),a("JIQ4"),a("/THe"),a("Hepa"),a("qk+S"),a("nkTr"),a("dBlN"),a("rrId"),a("qJja"),a("vuCK"),a("c4So"),a("pz6U"),a("7+6r"),a("5icx"),a("oQ3l"),a("n5EJ"),a("rHYB"),a("G0ni"),a("VOlp"),a("WWaW"),a("lAaI"),a("h/vX"),a("2s+s"),a("g31M"),a("K/Ps"),a("i1V/"),a("Xskn"),a("yS7f"),n.exports=a("Y6UD")},"0ykG":function(n,e,a){"use strict";angular.module("linagora.esn.admin").run(["dynamicDirectiveService","session",function(n,e){e.ready.then((function(){if(e.userIsDomainAdministrator()||e.user.isPlatformAdmin){var a=new n.DynamicDirective(!0,"admin-application-menu",{priority:-10});n.addInjection("esn-application-menu",a)}}))}])},"1Rjl":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminTechnicalUsersForm",{templateUrl:"/admin/app/technical-users/form/admin-technical-users-form.html",controller:"adminTechnicalUsersFormController",bindings:{technicalUser:"="}})}(angular)},"1Xwr":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminThemesPreview",{templateUrl:"/admin/app/themes/preview/admin-themes-preview.html",bindings:{colors:"<",logos:"<"}})}(angular)},"1cdN":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminThemesSubheader",{templateUrl:"/admin/app/themes/admin-themes-subheader.html",bindings:{onFormSubmit:"&",form:"<",reset:"&"}})}(angular)},"2gfp":function(n,e){!function(n){"use strict";function e(n,e){var a="reindex",t="reconfigure";return{getRegisteredResourceTypes:function(){return e.all("maintenance").one("elasticsearch").get()},reindex:function(e){return n({progressing:"Submitting reindexing "+e+" request...",success:"Request submitted",failure:"Failed to submit request"},(function(){return i({action:a,resource_type:e})}))},reconfigure:function(e){return n({progressing:"Submitting reconfiguration "+e+" index request...",success:"Request submitted",failure:"Failed to submit request"},(function(){return i({action:t,resource_type:e})}))}};function i(n){return e.all("maintenance").one("elasticsearch").post(null,null,n)}}e.$inject=["asyncAction","adminRestangular"],n.module("linagora.esn.admin").factory("adminMaintenanceElasticsearchService",e)}(angular)},"2hGZ":function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminDavController",["$stateParams","adminDomainConfigService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i){var o=this,r=n.domainId;function s(){return e.set(r,"davserver",o.config)}o.status=i.loading,e.get(r,"davserver").then((function(n){o.config=n,o.status=i.loaded})).catch((function(){o.status=i.error})),o.save=function(){return a(t,s)}}])},"2s+s":function(n,e){!function(n){"use strict";function e(n,e,a,t){return{getUserStates:function(e){return Object.keys(a).map((function(i){var o=n.find(e.states||[],(function(n){return n.name===a[i].name}));return(o=o||{name:i,value:t.enabled}).label=a[i].label,o}))},setUserStates:function(n,a){return e.setUserStates(n,a)}}}e.$inject=["_","userAPI","ADMIN_USER_ACTIONS","ADMIN_USER_ACTION_STATES"],n.module("linagora.esn.admin").factory("adminUsersStatesService",e)}(angular)},"33Cd":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminSubheaderSaveButton",{templateUrl:"/admin/app/subheader/admin-subheader-save-button.html",controller:"adminSubheaderSaveButtonController",bindings:{onClick:"&",form:"<"}})},"35QM":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminDomainsList",{templateUrl:"/admin/app/domains/list/admin-domains-list.html",controller:"adminDomainsListController"})}(angular)},"3SBb":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminFeatures",{templateUrl:"/admin/app/features/admin-features.html",controller:"adminFeaturesController"})}(angular)},"4SGr":function(n,e){!function(n){"use strict";function e(n){return{restrict:"E",template:"",scope:{mode:"@",template:"="},link:function(e,a){var t="<"+e.template+' mode="{{mode}}" />';a.append(n(t)(e))}}}e.$inject=["$compile"],n.module("linagora.esn.admin").directive("adminMaintenanceModule",e)}(angular)},"4uqE":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminModulesDisplayer",{templateUrl:"/admin/app/modules/displayer/admin-modules-displayer.html",bindings:{module:"=",onModuleEnabledStateChange:"&"},controller:"adminModulesDisplayerController"})},"50JM":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminMailTest",{templateUrl:"/admin/app/mail/test/admin-mail-test.html",controller:"adminMailTestController",bindings:{config:"<",transportType:"=",isMailConfigValid:"="}})},"577e":function(n,e){!function(n){"use strict";function e(e){return{getMaintenanceModules:function(){var a=[];return n.forEach(e.getAll(),(function(n){n.maintenance&&a.push(n)})),a}}}e.$inject=["esnModuleRegistry"],n.module("linagora.esn.admin").factory("adminMaintenanceService",e)}(angular)},"5Sbp":function(n,e){!function(n){n.module("linagora.esn.admin").component("adminSidebarItems",{templateUrl:"/admin/app/sidebar/items/admin-sidebar-items.html",bindings:{items:"<"}})}(angular)},"5U5W":function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_FORM_EVENT",{reset:"admin:form:reset",submit:"admin:form:submit"})},"5icx":function(n,e){!function(n){"use strict";function e(n){this.emailAvailabilityChecker=n.emailAvailabilityChecker}e.$inject=["adminUsersFormService"],n.module("linagora.esn.admin").controller("adminUsersFullFormController",e)}(angular)},"6+fd":function(n,e){!function(){"use strict";angular.module("linagora.esn.admin").controller("adminElasticsearchController",["$stateParams","adminDomainConfigService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i){var o=this,r=n.domainId;function s(){return e.set(r,"elasticsearch",o.config)}o.status=i.loading,e.get(r,"elasticsearch").then((function(n){o.config=n,o.status=i.loaded})).catch((function(){o.status=i.error})),o.save=function(){return a(t,s)}}])}()},"6KCv":function(n,e){!function(){"use strict";angular.module("linagora.esn.admin").component("adminResources",{templateUrl:"/admin/app/resources/admin-resources.html"})}()},"7+6r":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminUsersFullForm",{templateUrl:"/admin/app/users/form/admin-users-full-form.html",controller:"adminUsersFullFormController",bindings:{user:"<"}})},"7CDp":function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminRolesController",["$scope","$stateParams","$modal","adminRolesService","ADMIN_LOADING_STATUS",function(n,e,a,t,i){var o=this,r=e.domainId;o.status=i.loading,t.init(r),t.getAdministrators().then((function(n){o.administrators=n,o.status=i.loaded})).catch((function(){o.status=i.error})),o.openAddForm=function(){a({templateUrl:"/admin/app/roles/add/admin-roles-add.html",backdrop:"static",placement:"center",controllerAs:"$ctrl",controller:"adminRolesAddController"})},n.$on("$destroy",(function(){t.reset()}))}])},"7eR2":function(n,e,a){"use strict";angular.module("linagora.esn.admin").factory("adminModulesService",["$q","adminConfigApi","esnModuleRegistry","_","ADMIN_MODE",function(n,e,a,t,i){return{get:function(n){var o=n===i.platform,r=t.cloneDeep(a.getAll()),s=t.values(r).filter((function(n){return function(n,e){if(n)return e.config&&e.config.displayIn.platform;return e.config&&e.config.displayIn.domain}(o,n)})).map((function(n){return n.id}));return e.inspect(n,s).then((function(n){return n.forEach((function(n){r[n.name].config.configurations=n.configurations})),r}))},set:function(a,t){var i=t.map((function(n){var e=n.config.configurations.filter((function(n){return n.writable&&angular.isDefined(n.value)})).map((function(n){return{name:n.name,value:n.value}}));return{name:n.id,configurations:e}}));if(i.some((function(n){return n.configurations.length>0})))return e.set(a,i);return n.when()}}}])},"9GPS":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").factory("adminFeaturesService",["_","esnFeatureRegistry",function(n,e){return{includeFeaturesMetadata:function(a){var t=a||{};return n.values(e.getAll()).map((function(n){return n.configurations.forEach((function(e,a){n.configurations[a].value=!!t[e.name]&&t[e.name]})),n}))},getFeaturesConfigValue:function(n){var e={};return n.forEach((function(n){n.configurations.forEach((function(n){e[n.name]=n.value}))})),e}}}])}(angular)},"9kT/":function(n,e,a){"use strict";angular.module("linagora.esn.admin",["restangular","colorpicker","esn.http","esn.router","esn.core","esn.session","op.dynamicDirective","esn.subheader","esn.sidebar","esn.async-action","esn.infinite-list","esn.domain","esn.scroll","esn.attendee","esn.user","esn.file-saver","esn.form.helper","esn.module-registry","esn.feature-registry","esn.i18n","esn.datetime","esn.home-page","esn.configuration","esn.availability","esn.themes","esn.technicaluser","linagora.esn.resource"])},Bekw:function(n,e){!function(n){"use strict";function e(e){var a=this;a.$onInit=function(){a.resources=[],e.getRegisteredResourceTypes().then((function(t){n.forEach(t.data,(function(n){a.resources.push({type:n,onReindexBtnClick:function(){return e.reindex(n)},onReconfigureBtnClick:function(){return e.reconfigure(n)}})}))}))}}e.$inject=["adminMaintenanceElasticsearchService"],n.module("linagora.esn.admin").controller("adminMaintenanceElasticsearchController",e)}(angular)},ByUy:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminOauthTwitter",{templateUrl:"/admin/app/oauth/twitter/admin-oauth-twitter.html",bindings:{config:"=",isEnabled:"="}})}(angular)},CjI6:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminMaintenanceSubheader",{templateUrl:"/admin/app/maintenance/subheader/admin-maintenance-subheader.html"})}(angular)},D1bG:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminFeaturesSubheader",{templateUrl:"/admin/app/features/admin-features-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}(angular)},DpBT:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminJwtSubheader",{templateUrl:"/admin/app/jwt/admin-jwt-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})},ETZY:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminLdapForm",{templateUrl:"/admin/app/ldap/admin-ldap-form.html",controller:"adminLdapFormController",bindings:{ldapConfig:"="}})},EbGj:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminThemes",{templateUrl:"/admin/app/themes/admin-themes.html",controller:"adminThemesController"})}(angular)},EqRw:function(n,e){!function(){"use strict";angular.module("linagora.esn.admin").component("adminElasticsearch",{templateUrl:"/admin/app/elasticsearch/admin-elasticsearch.html",controller:"adminElasticsearchController"})}()},FcHZ:function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_JWT_AVAILABLE_ALGORITHMS",[{name:"HS256",description:"HMAC using SHA-256 hash algorithm"},{name:"HS384",description:"HMAC using SHA-384 hash algorithm"},{name:"HS512",description:"HMAC using SHA-512 hash algorithm"},{name:"RS256",description:"RSASSA using SHA-256 hash algorithm"},{name:"RS384",description:"RSASSA using SHA-384 hash algorithm"},{name:"RS512",description:"RSASSA using SHA-512 hash algorithm"},{name:"ES256",description:"ECDSA using P-256 curve and SHA-256 hash algorithm"},{name:"ES384",description:"ECDSA using P-384 curve and SHA-384 hash algorithm"},{name:"ES512",description:"ECDSA using P-521 curve and SHA-512 hash algorithm"}]).constant("ADMIN_JWT_DOWNLOAD_FILE_TYPE","text/plain")},"G+nh":function(n,e){!function(n){"use strict";function e(n){return{save:function(e,a){return n.all("autoconf").customPUT(a,"",{domain_id:e})}}}e.$inject=["adminRestangular"],n.module("linagora.esn.admin").factory("adminAutoconfService",e)}(angular)},G0ni:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminUsersListController",["$scope","memberSearchConfiguration","domainAPI","usSpinnerService","ADMIN_USERS_EVENTS","ADMIN_LOADING_STATUS",function(n,e,a,t,i,o){var r=this;r.spinnerKey="memberSpinner";var s={offset:0,limit:e.searchLimit,includesDisabledSearchable:!0,ignoreMembersCanBeSearchedConfiguration:!0,search:""};function l(){r.error=!1,r.restActive||(r.restActive=!0,r.search.running=!0,r.search.count=0,t.spin("memberSpinner"),a.getMembers(r.domainId,s).then((function(n){r.search.count=parseInt(n.headers("X-ESN-Items-Count"),10),r.members=r.members.concat(n.data),r.status=o.loaded}),(function(){r.error=!0,r.status=o.error})).finally((function(){r.search.running=!1,r.restActive=!1,t.stop("memberSpinner")})))}r.search={running:!1},r.members=[],r.restActive=!1,r.error=!1,r.status=o.loading,r.init=function(){l()},n.doSearch=function(){r.members=[],s.offset=0,s.search=n.searchInput,l()},r.loadMoreElements=function(){(0===r.members.length||r.members.length<r.search.count)&&(s.offset=r.members.length,l())},n.$on(i.CREATE,(function(n,e){e.emails=e.accounts[0].emails,r.members.unshift(e)})),r.init()}])},"G1+f":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminTechnicalUsersSubheader",{templateUrl:"/admin/app/technical-users/admin-technical-users-subheader.html"})}(angular)},Hepa:function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_USERS_EVENTS",{CREATE:"admin:users:user:create"})},HoFI:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminLdapTest",{templateUrl:"/admin/app/ldap/test/admin-ldap-test.html",controller:"adminLdapTestController",bindings:{domainId:"=",config:"<",disabled:"<"}})},IKzw:function(n,e){!function(){"use strict";angular.module("linagora.esn.admin").directive("adminLoadingStatus",(function(){return{restrict:"AE",templateUrl:"/admin/app/common/status-indicator/loading-status.html",transclude:!0}}))}()},ILx4:function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_LDAP_MAPPING",["firstname","lastname","email","description","main_phone","office_location","building_location","service","job_title"]).controller("adminLdapFormController",["$stateParams","ADMIN_LDAP_MAPPING",function(n,e){var a=this;function t(n){var e=n&&n.match(/\((.*)=\{\{username\}\}\)/);return e?e[1]:null}a.$onInit=function(){a.ldapConfig.configuration=a.ldapConfig.configuration||{},a.ldapConfig.usage=a.ldapConfig.usage||{auth:!0,search:!0,autoProvisioning:!0},n=a.ldapConfig.usage,e=n,void 0===e.autoProvisioning&&(e.autoProvisioning=!0);var n,e},a.domainId=n.domainId,a.AVAILABLE_KEYS=e,a.usernameField=function(n){if(arguments.length)return n=n||"",a.ldapConfig.configuration.searchFilter="("+n+"={{username}})",n;return t(a.ldapConfig.configuration.searchFilter)},a.delete=function(n){a.ldapConfig.deleted=!0,n.$setDirty()},a.undo=function(){a.ldapConfig.deleted=!1}}])},INMZ:function(n,e,a){"use strict";angular.module("linagora.esn.admin").factory("adminTestConfigService",["adminRestangular","ADMIN_MODE",function(n,e){return{testSendEmail:function(a,t,i){var o={to:t,config:i},r=n.all("test");return a!==e.platform&&(r=r.one("domains",a)),r.one("sendEmail").customPOST(o)},testAccessLdap:function(e,a){var t={config:a};return n.all("test").one("domains",e).one("accessLdap").customPOST(t)}}}])},IjmI:function(n,e){!function(n){"use strict";function e(n){var e=this;e.create=function(){return n.create(e.domain)}}e.$inject=["adminDomainsService"],n.module("linagora.esn.admin").controller("adminDomainsCreateController",e)}(angular)},J0ns:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminSubheaderCloseButton",{templateUrl:"/admin/app/subheader/admin-subheader-close-button.html",bindings:{backState:"@"}})},J2af:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminRolesAdministratorListItem",["asyncAction","adminRolesService","session","userUtils","esnI18nService",function(n,e,a,t,i){var o=this;o.isMe=a.user._id===o.user._id,o.displayName=o.user.displayName||t.displayNameOf(o.user);var r,s=(r=o.displayName,{progressing:i.translate("Revoking administration right for %s",r),success:i.translate("Revoked administration right for %s",r),failure:i.translate("Failed to revoke administration right for %s",r)});o.revoke=function(){return n(s,(function(){return e.removeAdministrator(o.user)}))}}])},JIQ4:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminUsersSubheader",{templateUrl:"/admin/app/users/admin-users-subheader.html"})},JSsL:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminDomains",{templateUrl:"/admin/app/domains/admin-domains.html",controller:"adminDomainsController"})}(angular)},"K/Ps":function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminWeb",{templateUrl:"/admin/app/web/admin-web.html",controller:"adminWebController"})},KKP2:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminRolesList",{templateUrl:"/admin/app/roles/list/admin-roles-list.html",bindings:{users:"=",template:"@",title:"@"}})},KhWA:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminDomainsItem",{templateUrl:"/admin/app/domains/item/admin-domains-item.html",bindings:{domain:"<",onEditBtnClick:"&"}})}(angular)},L3oH:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminModulesController",["_","$stateParams","adminModulesService","adminDomainConfigService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i,o,r){var s=this,l=e.domainId;s.$onInit=function(){s.status=r.loading,a.get(l).then((function(e){return t.get(l,"modules").then((function(a){return n.forEach(e,(function(e){var t={id:e.id},i=n.find(a,t)||{};n.has(i,"enabled")?e.enabled=i.enabled:n.has(e,"isDisplayedByDefault")?e.enabled=e.isDisplayedByDefault:e.enabled=void 0})),e}))})).then((function(n){s.modules=n,s.status=r.loaded})).catch((function(){s.status=r.error}))},s.saveModuleEnabledState=function(e,a){return t.get(l,"modules").then((function(i){i=i||[];var o={id:e.id},r=n.find(i,o)||o;return n.find(i,o)||i.push(r),r.enabled=a,t.set(l,"modules",i)}))}}])},L7ZJ:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").controller("adminOauthController",["$stateParams","adminDomainConfigService","asyncAction","_","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i,o){var r=this,s=n.domainId;function l(){return e.set(s,"oauth",r.config)}r.$onInit=function(){r.enabledOauths={},e.get(s,"oauth").then((function(n){r.config=n,r.status=o.loaded,t.forEach(r.config,(function(n,e){r.enabledOauths[e]=!t.isEmpty(n)}))})).catch((function(){r.status=o.error}))},r.save=function(){return function(n){t.forEach(r.enabledOauths,(function(e,a){r.enabledOauths[a]||delete n[a]}))}(r.config),a(i,l)},r.status=o.loading}])}(angular)},MCB7:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminLdap",{templateUrl:"/admin/app/ldap/admin-ldap.html",controller:"adminLdapController"})},"MoM/":function(n,e){!function(n){"use strict";function e(n,e){var a=this;function t(){return e.goToDomainMode()}function i(){return e.goToPlatformMode()}a.$onInit=function(){a.hasTwoAdminRoles=n.user.isPlatformAdmin&&n.userIsDomainAdministrator()},a.goToDomainMode=t,a.goToPlatformMode=i,a.isPlatformMode=function(){return e.isPlatformMode()},a.selectedChanged=function(){return"platform"===a.selectedMode?i():t()},a.currentDomain=n.domain}e.$inject=["session","adminModeService"],n.module("linagora.esn.admin").component("adminModeSwitch",{templateUrl:"/admin/app/common/mode/switch/admin-mode-switch.html",controller:e})}(angular)},OgTm:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminOauthSubheader",{templateUrl:"/admin/app/oauth/admin-oauth-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}(angular)},PX9m:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminOauthGithub",{templateUrl:"/admin/app/oauth/github/admin-oauth-github.html",bindings:{config:"=",isEnabled:"="}})}(angular)},Q2ij:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminDomainsSubheader",{templateUrl:"/admin/app/domains/subheader/admin-domains-subheader.html"})}(angular)},QXIX:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o){var r=this;r.domainId=e.domainId,r.technicalUser=i,r.onRemoveBtnClick=function(){return a({progressing:"Removing a technical user...",success:"A technical user has been removed",failure:"Failed to remove a technical user"},(function(){return t.remove(r.domainId,i).then((function(){n.$emit(o.REMOVED,i._id)}))}))}}e.$inject=["$rootScope","$stateParams","asyncAction","esnTechnicalUserAPIClient","technicalUser","ADMIN_TECHNICAL_USERS_EVENTS"],n.module("linagora.esn.admin").controller("adminTechnicalUsersRemoveController",e)}(angular)},"Qhg+":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminTechnicalUsers",{templateUrl:"/admin/app/technical-users/admin-technical-users.html",controller:"adminTechnicalUsersController"})}(angular)},R5v2:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminEmptyMessage",{templateUrl:"/admin/app/common/empty-message/admin-empty-message.html",bindings:{message:"@",type:"@",icon:"@?"},controller:"adminEmptyMessageController"})}(angular)},ROBL:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o,r){var s=this;s.domainId=e.domainId,s.technicalUser=r,s.onEditBtnClick=function(){return t({progressing:"Editing a technical user...",success:"A technical user has been edited",failure:"Failed to edit a technical user"},(function(){return a.update(s.domainId,i.qualifyTechnicalUser(s.technicalUser)).then((function(){n.$emit(o.UPDATED,s.technicalUser)}))}))}}e.$inject=["$rootScope","$stateParams","esnTechnicalUserAPIClient","asyncAction","adminTechnicalUsersService","ADMIN_TECHNICAL_USERS_EVENTS","technicalUser"],n.module("linagora.esn.admin").controller("adminTechnicalUsersUpdateController",e)}(angular)},RXMl:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminLogin",{templateUrl:"/admin/app/login/admin-login.html",controller:"adminLoginController"})}(angular)},Rb2V:function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_SEARCH_LIMIT",20).factory("adminRolesService",["$q","$log","domainAPI","attendeeService","ADMIN_SEARCH_LIMIT","ESN_ATTENDEE_DEFAULT_TEMPLATE_URL","_",function(n,e,a,t,i,o,r){var s,l;return{init:function(n){s=n},reset:function(){s=null,l=null},getAdministrators:function(){return l?n.when(l):a.getAdministrators(s).then((function(n){return l=n.data}))},addAdministrators:function(n){var e=n.map(r.property("id"));return a.addAdministrators(s,e).then((function(){Array.prototype.push.apply(l,n)}))},removeAdministrator:function(n){var e=n._id;return a.removeAdministrator(s,e).then((function(){r.remove(l,{_id:e})}))},searchAdministratorCandidates:function(n,a){return t.getAttendeeCandidates(n,i,["user"],a).catch((function(n){return e.error("Error while searching for administrator candidates",n),[]}))}}}])},Rtr3:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminSubheaderBurgerButton",{templateUrl:"/admin/app/subheader/admin-subheader-burger-button.html"})},SOSo:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o){var r=this;r.domainId=e.domainId,r.onAddBtnClick=function(){return i({progressing:"Creating a technical user...",success:"A technical user has been created",failure:"Failed to create a technical user"},(function(){return a.add(r.domainId,t.qualifyTechnicalUser(r.technicalUser)).then((function(e){n.$emit(o.ADDED,e)}))}))}}e.$inject=["$rootScope","$stateParams","esnTechnicalUserAPIClient","adminTechnicalUsersService","asyncAction","ADMIN_TECHNICAL_USERS_EVENTS"],n.module("linagora.esn.admin").controller("adminTechnicalUsersAddController",e)}(angular)},U8w0:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").constant("ADMIN_THEMES_COLOR_VARIABLES",[{apiVariable:"primaryColor",displayText:"Primary color",default:"#2196F3"},{apiVariable:"accentColor",displayText:"Accent color",default:"#FFC107"},{apiVariable:"bodyBgColor",displayText:"Background color",default:"#f7f7f7"},{apiVariable:"textPrimaryColor",displayText:"Text primary color",default:"#ffffff"},{apiVariable:"textColor",displayText:"Text color",default:"#333"}]).constant("ADMIN_THEMES_LOGO_VARIABLES",[{apiVariable:"logo",displayText:"Logo",default:"/images/white-logo.svg"},{apiVariable:"favicon",displayText:"Favicon",default:"/images/logo-tiny.png"}])}(angular)},Un5k:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminRolesSubheader",{templateUrl:"/admin/app/roles/admin-roles-subheader.html"})},VH2o:function(n,e,a){"use strict";angular.module("linagora.esn.admin").config(["$stateProvider","$urlRouterProvider",function(n,e){e.when("/admin",["$state","$location","session","adminModeService",function(n,e,a,t){a.ready.then((function(){return a.userIsDomainAdministrator()?t.goToDomainMode():a.user.isPlatformAdmin?t.goToPlatformMode():e.path("/")}))}]),n.state("admin",{url:"/admin",templateUrl:"/admin/app/app.html",resolve:{isAdmin:["$location","session",function(n,e){return e.ready.then((function(){e.userIsDomainAdministrator()||e.user.isPlatformAdmin||n.path("/")}))}]}}).state("admin.domain",{url:"/:domainId",deepStateRedirect:{default:"admin.domain.general",params:!0,fn:function(){return!0}},resolve:{isAdmin:["$location","session",function(n,e){return e.ready.then((function(){e.userIsDomainAdministrator()||e.user.isPlatformAdmin||n.path("/")}))}]}}).state("admin.domain.mail",{url:"/mail",views:{"root@admin":{template:"<admin-mail />"}}}).state("admin.domain.users",{url:"/users",views:{"root@admin":{template:"<admin-users />"}}}).state("admin.domain.technicalusers",{url:"/technicalusers",views:{"root@admin":{template:"<admin-technical-users />"}}}).state("admin.domain.users.create",{url:"/create",views:{"root@admin":{template:"<admin-users-create />"}},resolve:{isEnabled:["$location","$stateParams","adminUsersService",function(n,e,a){return a.isUserCreationEnabled(e.domainId).then((function(e){e||n.path("/admin")}))}]},params:{user:null}}).state("admin.domain.dav",{url:"/dav",views:{"root@admin":{template:"<admin-dav />"}}}).state("admin.domain.ldap",{url:"/ldap",views:{"root@admin":{template:"<admin-ldap />"}}}).state("admin.domain.modules",{url:"/modules",views:{"root@admin":{template:"<admin-modules />"}}}).state("admin.domain.roles",{url:"/roles",views:{"root@admin":{template:"<admin-roles />"}}}).state("admin.domain.resources",{url:"/resources",views:{"root@admin":{template:"<admin-resources />"}}}).state("admin.domain.web",{url:"/web",views:{"root@admin":{template:"<admin-web />"}}}).state("admin.domain.webserver",{url:"/webserver",views:{"root@admin":{template:"<admin-webserver />"}}}).state("admin.domain.jwt",{url:"/jwt",views:{"root@admin":{template:"<admin-jwt />"}}}).state("admin.domain.general",{url:"/general",views:{"root@admin":{template:"<admin-general />"}}}).state("admin.domain.oauth",{url:"/oauth",views:{"root@admin":{template:"<admin-oauth />"}}}).state("admin.domain.autoconf",{url:"/autoconf",views:{"root@admin":{template:"<admin-autoconf />"}}}).state("admin.domain.domains",{url:"/domains",views:{"root@admin":{template:"<admin-domains />"}}}).state("admin.domain.features",{url:"/features",views:{"root@admin":{template:"<admin-features />"}}}).state("admin.domain.maintenance",{url:"/maintenance",views:{"root@admin":{template:"<admin-maintenance />"}}}).state("admin.domain.login",{url:"/login",views:{"root@admin":{template:"<admin-login />"}}}).state("admin.domain.theme",{url:"/theme",views:{"root@admin":{template:"<admin-themes />"}}}).state("admin.domain.elasticsearch",{url:"/elasticsearch",views:{"root@admin":{template:"<admin-elasticsearch />"}}}).state("admin.domain.session",{url:"/session",views:{"root@admin":{template:"<admin-session />"}}})}])},VJ1c:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminRolesAddController",["$q","esnI18nService","asyncAction","adminRolesService",function(n,e,a,t){var i=this;i.newAdministrators=[],i.add=function(){if(0===i.newAdministrators.length)return n.reject();var o,r,s=Date.now(),l=(o=i.newAdministrators.length,r=o>1?"administrators":"administrator",{progessing:e.translate("Adding %s "+r,o),success:e.translate("Added %s "+r,o),failure:"Failed to add "+r});return i.newAdministrators.forEach((function(n){n.role={timestamps:{creation:s}}})),a(l,(function(){return t.addAdministrators(i.newAdministrators)}))}}])},VNPO:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminMailSubheader",{templateUrl:"/admin/app/mail/admin-mail-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})},VOlp:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminUsersStates",{templateUrl:"/admin/app/users/states/admin-users-states.html",bindings:{user:"="},controller:"AdminUsersStatesController"})}(angular)},"VRg+":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").constant("ADMIN_TECHNICAL_USERS_EVENTS",{ADDED:"admin:technical:user:events:added",UPDATED:"admin:technical:user:events:updated",REMOVED:"admin:technical:user:events:removed"})}(angular)},VTQ0:function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_MODE",{domain:"domain",platform:"platform"}).constant("ADMIN_DEFAULT_NOTIFICATION_MESSAGES",{progressing:"Saving configuration...",success:"Configuration saved",failure:"Failed to save configuration"}).constant("ADMIN_LOADING_STATUS",{loading:"loading",loaded:"loaded",error:"error"}).constant("ADMIN_PAGES",[{id:"general",name:"General",icon:"mdi-settings",displayIn:{domain:!0,platform:!0}},{id:"login",name:"Login",icon:"mdi-login-variant",displayIn:{domain:!1,platform:!0}},{id:"features",name:"Features",icon:"mdi-toggle-switch",displayIn:{domain:!0,platform:!0}},{id:"mail",name:"Mail",icon:"mdi-email",displayIn:{domain:!0,platform:!0}},{id:"users",name:"Users",icon:"mdi-account-multiple",displayIn:{domain:!0,platform:!1}},{id:"technicalusers",name:"Technical Users",icon:"mdi-account-settings-variant",displayIn:{domain:!0,platform:!1}},{id:"roles",name:"Roles",icon:"mdi-clipboard-account",displayIn:{domain:!0,platform:!1}},{id:"resources",name:"Resources",icon:"mdi-presentation",displayIn:{domain:!0,platform:!0}},{id:"dav",name:"DAV",icon:"mdi-calendar-blank",displayIn:{domain:!0,platform:!0}},{id:"ldap",name:"LDAP",icon:"mdi-book",displayIn:{domain:!0,platform:!1}},{id:"web",name:"Web",icon:"mdi-web",displayIn:{domain:!0,platform:!1}},{id:"webserver",name:"Web server",icon:"mdi-server-network",displayIn:{domain:!1,platform:!0}},{id:"modules",name:"Modules",icon:"mdi-view-module",displayIn:{domain:!0,platform:!0}},{id:"jwt",name:"JWT",icon:"mdi-shield",displayIn:{domain:!1,platform:!0}},{id:"oauth",name:"Social connections",icon:"mdi-twitter",displayIn:{domain:!1,platform:!0}},{id:"autoconf",name:"Autoconf",icon:"mdi-layers",displayIn:{domain:!0,platform:!1}},{id:"domains",name:"Domains",icon:"mdi-view-list",displayIn:{domain:!1,platform:!0}},{id:"maintenance",name:"Maintenance",icon:"mdi-library-books",displayIn:{domain:!0,platform:!0}},{id:"theme",name:"Theme",icon:"mdi-brush",displayIn:{domain:!0,platform:!1}},{id:"elasticsearch",name:"Elasticsearch",icon:"mdi-search-web",displayIn:{domain:!1,platform:!0}},{id:"session",name:"Session",icon:"mdi-update",displayIn:{domain:!1,platform:!0}}])},VWOR:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").controller("adminTechnicalUsersController",["$log","$scope","$stateParams","$modal",function(n,e,a,t){e.domainId=a.domainId,this.openAddForm=function(){t({templateUrl:"/admin/app/technical-users/add/admin-technical-users-add.html",backdrop:"static",placement:"center",controllerAs:"$ctrl",controller:"adminTechnicalUsersAddController"})}}])}(angular)},Vg31:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminMailTestController",["$stateParams","adminMailService","adminTestConfigService","$q",function(n,e,a,t){var i=this,o=n.domainId;i.test=function(n){if(!i.isMailConfigValid)return i.message={status:"invalidMailConfig"},t.reject();if(n&&n.$valid){var r=e.qualifyTransportConfig(i.transportType,i.config);return i.message={status:"isSending"},function(n){return a.testSendEmail(o,i.mailto,n)}(r).then((function(n){i.message={status:"success",mailto:n.config.data.to}}),(function(n){i.message={status:"error",msg:n.data.error.details}}))}return t.reject()}}])},Vk2m:function(n,e){!function(n){"use strict";function e(n,e,a){var t=this;t.domain=a,t.update=function(){e.update(t.domain)}}e.$inject=["$scope","adminDomainsService","domain"],n.module("linagora.esn.admin").controller("adminDomainUpdateController",e)}(angular)},WFW2:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").controller("adminEmptyMessageController",(function(){var n=this,e={error:"mdi-alert-circle"};n.$onInit=function(){n.icon=n.icon||e[n.type]}}))}(angular)},WWaW:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").constant("ADMIN_USER_ACTIONS",{login:{name:"login",label:"Login"},searchable:{name:"searchable",label:"Can be searched"}}).constant("ADMIN_USER_ACTION_STATES",{disabled:"disabled",enabled:"enabled"})}(angular)},WiSe:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminMaintenance",{templateUrl:"/admin/app/maintenance/admin-maintenance.html",controller:"adminMaintenanceController"})}(angular)},XXXm:function(n,e){!function(){"use strict";angular.module("linagora.esn.admin").component("adminElasticsearchSubheader",{templateUrl:"/admin/app/elasticsearch/admin-elasticsearch-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}()},XYZU:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminMaintenanceElasticsearch",{templateUrl:"/admin/app/maintenance/elasticsearch/admin-maintenance-elasticsearch.html",controller:"adminMaintenanceElasticsearchController"})}(angular)},Xskn:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminWebserverSubheader",{templateUrl:"/admin/app/webserver/admin-webserver-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}(angular)},Y6UD:function(n,e){!function(n){"use strict";function e(n,e,a,t,i){var o=this,r=["webserver","maxSizeUpload"];function s(){return n.setMultiple(i.platform,[{name:r[0],value:o.config.webserver},{name:r[1],value:o.config.maxSizeUpload}])}o.$onInit=function(){o.status=t.loading,n.getMultiple(i.platform,r).then((function(n){o.config=n,o.status=t.loaded})).catch((function(){o.status=t.error}))},o.save=function(){return e(a,s)}}e.$inject=["adminDomainConfigService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS","ADMIN_MODE"],n.module("linagora.esn.admin").controller("adminWebserverController",e)}(angular)},Z9hQ:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o){var r=this,s={offset:0,limit:20};function l(){return s.offset=r.elements.length,t.list(s).then((function(n){return n.data}))}r.$onInit=function(){r.loadMoreElements=i(r,l),e.$on(o.DOMAIN_CREATED,(function(n,e){!function(n){if(!n)return;r.elements.unshift(n)}(e)})),e.$on(o.DOMAIN_UPDATED,(function(n,e){!function(n){if(!n||!n.id)return;var e=a.findIndex(r.elements,{id:n.id});-1!==e&&(r.elements[e]=n)}(e)}))},r.showEditDomainForm=function(e){var a=n({templateUrl:"/admin/app/domains/update/admin-domains-update.html",backdrop:"static",placement:"center",controller:"adminDomainUpdateController",controllerAs:"$ctrl",locals:{domain:e},show:!1});a.$promise.then(a.show)}}e.$inject=["$modal","$scope","_","domainAPI","infiniteScrollHelper","ADMIN_DOMAINS_EVENTS"],n.module("linagora.esn.admin").controller("adminDomainsListController",e)}(angular)},ZR1u:function(n,e,a){"use strict";angular.module("linagora.esn.admin").factory("adminMailService",["ADMIN_MAIL_TRANSPORT_TYPES",function(n){function e(n){if(n&&(n.user||n.pass))return n}return{getTransportType:function(e){return e&&e.transport?e.transport.module?n.local:e.transport.config.service?"gmail"===e.transport.config.service?n.gmail:n.local:n.smtp:null},qualifyTransportConfig:function(n,a){var t={mail:{noreply:a.mail.noreply,feedback:a.mail.feedback}},i=a.transport.config;switch(n){case"Local":t.transport={module:a.transport.module,config:{dir:i.dir,browser:i.browser||!1}};break;case"SMTP":i.tls=i.tls||{},t.transport={config:{host:i.host,secure:i.secure||!1,tls:{rejectUnauthorized:i.tls.rejectUnauthorized||!1},port:i.port,auth:e(i.auth)}};break;case"Gmail":t.transport={config:{service:"gmail",auth:{user:i.auth.user,pass:i.auth.pass}}};break;default:t=a}return t}}}])},ZfvR:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminOauthUsageOptions",{templateUrl:"/admin/app/oauth/usage-options/admin-oauth-usage-options.html",bindings:{options:"="}})}(angular)},Ziv5:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminLdapTestController",["adminTestConfigService",function(n){var e=this;e.test=function(){return e.message={status:"testing"},n.testAccessLdap(e.domainId,e.config).then((function(){e.message={status:"success"}}),(function(n){var a=n.data.error;e.message={status:"error",msg:a.details}}))}}])},Zm9s:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").controller("adminRolesAutoCompleteController",["$element","elementScrollService","adminRolesService",function(n,e,a){var t=this;t.$onInit=function(){a.getAdministrators().then((function(n){t.excludes=n.map((function(n){return{id:n.id,objectType:"user"}}))}))},t.search=function(n){return a.searchAdministratorCandidates(n,t.excludes)},t.onTagAdded=function(a){t.excludes.push({id:a.id,objectType:a.objectType}),e.autoScrollDown(n.find("div.tags"))},t.onTagRemoved=function(n){t.excludes=t.excludes.filter((function(e){return e.id!==n.id}))}}])}(angular)},ZrAB:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o){var r=this,s=n.domainId;function l(){var n=a.getFeaturesConfigValue(r.features);return t.set(s,"features",n)}r.$onInit=function(){t.get(s,"features").then((function(n){r.features=a.includeFeaturesMetadata(n),r.status=o.loaded})).catch((function(){r.status=o.error}))},r.save=function(){return e(i,l)},r.status=o.loading}e.$inject=["$stateParams","asyncAction","adminFeaturesService","adminDomainConfigService","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS"],n.module("linagora.esn.admin").controller("adminFeaturesController",e)}(angular)},Zzxw:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminModulesSaveButtonController",["rejectWithErrorNotification",function(n){var e=this;e.checkValidThenSubmit=function(){return e.form&&e.form.$valid?e.onFormSubmit():(e.form.$setSubmitted(),n("Form is invalid!"))}}])},a7nP:function(n,e){!function(n){"use strict";function e(n,e,a,t){return{get:function(e,i){if(!i.length)return n.when([]);if(e!==t.platform)return a.getDomainConfigurations(e,i);return a.getPlatformConfigurations(i)},set:function(e,i){if(!i.length)return n.when();if(e!==t.platform)return a.setDomainConfigurations(e,i);return a.setPlatformConfigurations(i)},inspect:function(e,i){if(!i.length)return n.when([]);if(e!==t.platform)return a.inspectDomainConfigurations(e,i);return a.inspectPlatformConfigurations(i)},generateJwtKeyPair:function(){return e.all("configuration").one("generateJwtKeyPair").post()},generateJwtToken:function(){return e.all("configuration").one("generateJwtToken").post()}}}e.$inject=["$q","adminRestangular","esnConfigApi","ADMIN_MODE"],n.module("linagora.esn.admin").factory("adminConfigApi",e)}(angular)},aHSY:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").constant("ADMIN_TECHNICAL_USER_TYPES",["dav"])}(angular)},acNZ:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminRolesAdministratorListItem",{templateUrl:"/admin/app/roles/list/admin-roles-administrator-list-item.html",bindings:{user:"="},controller:"adminRolesAdministratorListItem"})},ad0f:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminDavSubheader",{templateUrl:"/admin/app/dav/admin-dav-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})},bS2D:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").factory("adminTechnicalUsersService",(function(){return{qualifyTechnicalUser:function(n){var e={};return n.data.forEach((function(n){e[n.key]=n.value})),n.data=e,n}}}))}(angular)},bZzY:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminJwt",{templateUrl:"/admin/app/jwt/admin-jwt.html",controller:"adminJwtController"})},bk53:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminModules",{templateUrl:"/admin/app/modules/admin-modules.html",controller:"adminModulesController"})},c4So:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminUsersCreateController",["$stateParams","adminUsersService",function(n,e){var a=this,t=n.domainId,i={accounts:[{type:"email",emails:[]}],domains:[{domain_id:t}]};a.user=n.user||angular.copy(i),a.save=function(){return e.createMember(t,a.user).then((function(){a.user=angular.copy(i)}))}}])},cwLY:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminModulesSubheader",{templateUrl:"/admin/app/modules/subheader/admin-modules-subheader.html"})},dBlN:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminUsersConfiguration",{templateUrl:"/admin/app/users/configuration/admin-users-configuration.html",controller:"AdminUsersConfigurationController"})}(angular)},eD0p:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminMailSmtp",{templateUrl:"/admin/app/mail/transport/admin-mail-smtp.html",bindings:{transportConfig:"=",form:"="}})},ejW9:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminGeneral",{templateUrl:"/admin/app/general/admin-general.html",controller:"adminGeneralController"})}(angular)},el6p:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").constant("ADMIN_DOMAINS_EVENTS",{DOMAIN_CREATED:"admin:domains:domain:created",DOMAIN_UPDATED:"admin:domains:domain:updated"})}(angular)},exUP:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminModulesSaveButton",{templateUrl:"/admin/app/modules/form/admin-modules-save-button.html",controller:"adminModulesSaveButtonController",bindings:{onFormSubmit:"&",form:"<"}})},f887:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminThemesPreviewMobile",{templateUrl:"/admin/app/themes/preview/mobile/admin-themes-preview-mobile.html",bindings:{colors:"<",logos:"<"}})}(angular)},fgJ2:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o,r,s,l,u,m,c,d,f,p,g,h){var v=this;function S(){var n=p.map((function(n){return{key:n.apiVariable,value:v.model.colors[n.apiVariable]}})),e={};return g.forEach((function(n){e[n.apiVariable]=void 0===v.model.logos[n.apiVariable]||v.model.logos[n.apiVariable]===n.default?"":v.model.logos[n.apiVariable]})),v.themesServiceForDomain.saveTheme({colors:n,logos:e}).then((function(){o.assign(v.model.colors.originalValues,v.model.colors.newValues),o.assign(v.model.logos.originalValues,v.model.logos.newValues)})).finally(I)}function A(n,e){v.uploadLock[e]=!1,v.model.logos[e]=n[0].response.data._id}function b(n,e){v.uploadLock[e]=!1,d(s.translate("Sorry, we couldn't upload the image. Try again later").toString(),{}),I()}function I(){if(o.any(o.values(v.uploadLock)))return e.form.$pristine=!0;e.form.$pristine=!0,[v.model.colors,v.model.logos].forEach((function(n){for(var a in n.originalValues)if(n.newValues[a]!==n.originalValues[a]){e.form&&(e.form.$pristine=!1);break}}))}function T(n,e){var a=[];function t(n){if(n){var e=o.clone(n);return e.displayText=s.translate(n.displayText).toString(),e}}for(var i=0;i<n.length;i+=e){for(var r=[],l=i;l<Math.min(n.length,i+e);l++)r.push(t(n[l]));r.length>0&&a.push(r)}return{groups:a,groupLength:e}}function E(n,e,a){var t="_"+n;v.model[e].originalValues[t]=v.model[e].newValues[t]=a,Object.defineProperty(v.model[e],n,{get:function(){return v.model[e].newValues[t]},set:function(n){v.model[e].newValues[t]=n,I()}})}v.themesServiceForDomain=l.forDomain(n.domainId),v.status=f.loading,v.uploadLock={},v.groupLength=3,v.adminThemesColorVariablesGroups=T(p,v.groupLength),v.adminThemesLogoVariablesGroups=T(g,v.groupLength),v.model={colors:{originalValues:{},newValues:{}},logos:{originalValues:{},newValues:{}}},v.$onInit=function(){return v.status=f.loading,v.themesServiceForDomain.getTheme().then((function(n){p.forEach((function(e){E(e.apiVariable,"colors",n.colors[e.apiVariable]||e.default)})),g.forEach((function(e){E(e.apiVariable,"logos",n.logos[e.apiVariable]||e.default)})),v.status=f.loaded})).catch((function(){v.status=f.error}))},v.save=function(){return r({progressing:"Saving configuration...",success:"Configuration saved. Click on 'Reload' to apply changes",failure:"Failed to save configuration"},S,{onSuccess:{linkText:"Reload",action:function(){i.location.reload()}}})},v.onFileSelect=function(n,e){var a=m.get();return u("core.maxSizeUpload",h).then((function(i){var r=n[0];r.size<i.maxSizeUpload?(v.uploadLock[e]=!0,I(),a.addFile(r,!0),a.start(),a.await(o.partialRight(A,e),o.partialRight(b,e))):d(s.translate("Sorry, the image is too heavy. The max image size is %s",[t("bytes")(i.maxSizeUpload)]).toString(),{})}))},v.computeTextColor=c.computeTextColor,v.reset=function(){p.forEach((function(n){v.model.colors[n.apiVariable]=n.default})),g.forEach((function(n){v.model.logos[n.apiVariable]=n.default}))}}e.$inject=["$stateParams","$scope","$q","$filter","$window","_","asyncAction","esnI18nService","themesService","esnConfig","fileUploadService","colorContrastService","rejectWithErrorNotification","ADMIN_LOADING_STATUS","ADMIN_THEMES_COLOR_VARIABLES","ADMIN_THEMES_LOGO_VARIABLES","MAX_SIZE_UPLOAD_DEFAULT"],n.module("linagora.esn.admin").controller("adminThemesController",e)}(angular)},g31M:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminWebSubheader",{templateUrl:"/admin/app/web/admin-web-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})},gTlB:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminOauth",{templateUrl:"/admin/app/oauth/admin-oauth.html",controller:"adminOauthController"})}(angular)},geSO:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").constant("ADMIN_AUTOCONF_SOCKET_TYPES",[{label:"None",key:"1"},{label:"STARTTLS",key:"2"},{label:"SSL",key:"3"}])}(angular)},"h/vX":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").run(["dynamicDirectiveService",function(n){var e=new n.DynamicDirective(!0,"admin-users-states",{attributes:[{name:"user",value:"member"}]});n.addInjection("admin-user-list-menu-items",e)}])}(angular)},"i1V/":function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminWebController",["$stateParams","adminDomainConfigService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i){var o=this,r=n.domainId;function s(){return e.set(r,"web",o.config)}o.status=i.loading,e.get(r,"web").then((function(n){o.config=n,o.status=i.loaded})).catch((function(){o.status=i.error})),o.save=function(){return a(t,s)}}])},iBsm:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminOauthGoogle",{templateUrl:"/admin/app/oauth/google/admin-oauth-google.html",bindings:{config:"=",isEnabled:"="}})}(angular)},iFuT:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminDav",{templateUrl:"/admin/app/dav/admin-dav.html",controller:"adminDavController"})},ifw2:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o,r,s){var l=this,u=e.domainId;function m(){return t.save(u,l.account)}l.$onInit=function(){a.get(u,"autoconf").then((function(n){l.account=n&&n.accounts&&n.accounts.length&&n.accounts[0],l.ADMIN_AUTOCONF_SOCKET_TYPES=s,l.status=r.loaded})).catch((function(){l.status=r.error}))},l.save=function(){return i(o,m)},l.status=r.loading}e.$inject=["_","$stateParams","adminDomainConfigService","adminAutoconfService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS","ADMIN_AUTOCONF_SOCKET_TYPES"],n.module("linagora.esn.admin").controller("adminAutoconfController",e)}(angular)},imgl:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminThemesPreviewDesktop",{templateUrl:"/admin/app/themes/preview/desktop/admin-themes-preview-desktop.html",bindings:{colors:"<",logos:"<"}})}(angular)},jEzJ:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").controller("adminSessionController",["$stateParams","adminDomainConfigService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i){var o=this,r=n.domainId;function s(){return e.set(r,"session",o.config)}o.status=i.loading,e.get(r,"session").then((function(n){o.config=n,o.status=i.loaded})).catch((function(){o.status=i.error})),o.save=function(){return a(t,s)}}])}(angular)},jtFP:function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminJwtController",["$stateParams","asyncAction","esnFileSaver","adminConfigApi","adminDomainConfigService","ADMIN_JWT_AVAILABLE_ALGORITHMS","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS","ADMIN_JWT_DOWNLOAD_FILE_TYPE",function(n,e,a,t,i,o,r,s,l){var u=this,m=n.domainId,c={progressing:"Generating new keys...",success:"Keys generated",failure:"Failed to generate keys"};function d(){return i.set(m,"jwt",u.config)}function f(){return t.generateJwtKeyPair()}u.status=s.loading,i.get(m,"jwt").then((function(n){u.config=n||{},u.status=s.loaded}),(function(){u.status=s.error})),u.availableAlgorithms=o,u.save=function(){return e(r,d)},u.downloadPublicKey=function(){a.saveText(u.config.publicKey,"publicKey.txt",l)},u.downloadPrivateKey=function(){a.saveText(u.config.privateKey,"privateKey.txt",l)},u.generate=function(n){return e(c,f).then((function(e){u.config.publicKey=e.data.publicKey,u.config.privateKey=e.data.privateKey,n.$setDirty()}))}}])},k7eI:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminFeaturesItem",{templateUrl:"/admin/app/features/item/admin-features-item.html",bindings:{feature:"="}})}(angular)},kEsG:function(n,e,a){"use strict";angular.module("linagora.esn.admin").directive("adminModulesForm",["$compile","ADMIN_FORM_EVENT",function(n,e){return{restrict:"E",template:"",scope:{configurations:"=",mode:"@",availableModes:"=",template:"="},link:function(a,t){var i="<"+a.template+' configurations="configurations" mode="{{mode}}", available-modes="availableModes" />';t.append(n(i)(a));var o=angular.copy(a.configurations);a.$on(e.submit,(function(){o=angular.copy(a.configurations)})),a.$on(e.reset,(function(){a.configurations=angular.copy(o)}))}}}])},lAaI:function(n,e){!function(n){"use strict";function e(e,a,t,i){var o=this;o.init=function(){o.username=a.displayNameOf(o.user),o.states=(e=t.getUserStates(o.user),n.copy(e).map((function(n){return n.value=n.value===i.enabled,n})));var e},o.updateUserStates=function(){return e({progressing:"Updating user states...",success:"User states updated",failure:"Failed to update user states"},(function(){var n=o.states.map((function(n){return{name:n.name,value:n.value?i.enabled:i.disabled}}));return t.setUserStates(o.user._id,n).then((function(){o.user.states=n}))}))}}e.$inject=["asyncAction","userUtils","adminUsersStatesService","ADMIN_USER_ACTION_STATES"],n.module("linagora.esn.admin").controller("AdminUsersStatesController",e)}(angular)},lr4A:function(n,e,a){"use strict";angular.module("linagora.esn.admin").directive("adminFormInputBytes",["ADMIN_FORM_EVENT",function(n){return{restrict:"E",templateUrl:"/admin/app/common/form/admin-form-input-bytes.html",scope:{inputUnit:"@",inputValue:"=",min:"@",max:"@",required:"@",label:"@",disabled:"="},link:function(e){var a,t={BYTE:0,KB:10,MB:20,GB:30,TB:40,PB:50};function i(){e.display={},e.AVAILABLE_UNITS=Object.keys(t),e.inputUnit=t[e.inputUnit]?e.inputUnit:e.AVAILABLE_UNITS[0],a={min:r(e.min),max:r(e.max)},function(){if(!a.max)return;var n=a.max.value*Math.pow(2,t[a.max.key]),i=angular.copy(e.AVAILABLE_UNITS);i.reverse(),angular.forEach(i,(function(a){var i=t[a];n<Math.pow(2,i)&&e.AVAILABLE_UNITS.splice(-1,1)}))}(),e.display.unit=function(n,a){if(!n||0===n)return a;var i,o=n*Math.pow(2,t[a]),r=angular.copy(e.AVAILABLE_UNITS);return r.reverse(),angular.forEach(r,(function(n){var e=t[n];i||o%Math.pow(2,e)!=0||(i=n)})),i}(e.inputValue,e.inputUnit),e.display.value=o(e.inputValue,e.inputUnit,e.display.unit),s()}function o(n,e,a){if(!n||0===n)return n;var i=t[e]-t[a];return n*Math.pow(2,i)}function r(n){var e;if(n)return angular.forEach(t,(function(a,t){var i=n.split(t);!e&&2===i.length&&angular.equals(i[1],"")&&(e={key:t,value:parseFloat(i[0])})})),e}function s(){a.min&&(e.minValue=Math.ceil(o(a.min.value,a.min.key,e.display.unit))),a.max&&(e.maxValue=o(a.max.value,a.max.key,e.display.unit))}i(),e.onChange=function(){e.inputValue=o(e.display.value,e.display.unit,e.inputUnit)},e.onSelect=function(n){e.form.dataSizeInput.$pristine&&e.form.dataSizeInput.$setDirty(),e.display.unit=n,s(),e.onChange()};var l=angular.copy(e.inputValue);e.$on(n.reset,(function(){e.inputValue=angular.copy(l),i()})),e.$on(n.submit,(function(){l=angular.copy(e.inputValue),i()}))}}}])},m0lg:function(n,e,a){"use strict";angular.module("linagora.esn.admin").directive("adminRolesListItem",["$compile",function(n){return{restrict:"E",template:"",scope:{user:"=",template:"="},link:function(e,a){var t="<"+e.template+' user="user" />';a.append(n(t)(e))}}}])},mDy4:function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_MAIL_AVAILABLE_RESOLVERS",[{name:"All",key:"all",hasOptions:!1},{name:"Whatsup",key:"whatsup",hasOptions:!0}])},mODZ:function(n,e){!function(n){"use strict";function e(n,e,a){var t=this;t.$onInit=function(){t.domain||(t.domain={})},t.uniqueDomainName=function(a){if(!a)return n.reject(new Error("Domain name required"));return e.getByName(a).then((function(e){if(e)return n.reject(new Error("Domain already exists"))}))},t.isEmailAvailable=function(n){return a.checkEmailAvailability(n).then((function(n){return n.available}))}}e.$inject=["$q","domainAPI","esnAvailabilityService"],n.module("linagora.esn.admin").controller("adminDomainsFormController",e)}(angular)},mVBp:function(n,e){angular.module("linagora.esn.admin").controller("adminFormMultiInputController",["$scope","$timeout","$element","_",function(n,e,a,t){n.ngModel=n.ngModel?n.ngModel:{};var i=this,o=n.ngModel||{};function r(){return t.difference(i.availableTypes,Object.keys(o))}i.fields=[],i.requiredFields=[],i.availableTypes=n.availableTypes,i.requiredTypes=n.requiredTypes,angular.forEach(o,(function(n,e){t.contains(i.availableTypes,e)&&i.fields.push({type:e,value:n}),t.contains(i.requiredTypes,e)&&i.requiredFields.push({type:e,value:n})})),i.requiredTypes&&0===i.requiredFields.length&&i.requiredTypes.forEach((function(n){i.requiredFields.push({type:n,value:""})})),i.showAddButton=function(){return r().length>0},i.isTypeSelected=function(n){return Object.keys(o).indexOf(n)>-1},i.onDataChange=function(){Object.keys(o).forEach((function(n){delete o[n]})),i.fields.forEach((function(n){o[n.type]=n.value})),i.requiredFields.forEach((function(n){o[n.type]=n.value}))},i.addField=function(){var n=r();if(n.length){var t,s=n[0];i.fields.push({value:"",type:s}),o[s]="",t=".admin-form-multi-input-content .multi-input-text",e((function(){a.find(t).last().focus()}),0,!1)}},i.deleteField=function(n,e){t.remove(i.fields,{type:n.type}),delete o[n.type],e.$setDirty()}}])},msIs:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminDomainsForm",{templateUrl:"/admin/app/domains/form/admin-domains-form.html",bindings:{updateMode:"<",domain:"="},controller:"adminDomainsFormController"})}(angular)},n5EJ:function(n,e){!function(n){"use strict";function e(e,a,t){var i=this,o={accounts:[{type:"email",emails:[]}],domains:[{domain_id:i.domainId}]};i.emailAvailabilityChecker=e.emailAvailabilityChecker,i.save=function(e){if(e&&e.$valid)return a.createMember(i.domainId,i.user).then((function(){i.user=n.copy(o),e.$setPristine()}));return e.$setSubmitted(),t("Form is invalid!")},i.user=n.copy(o)}e.$inject=["adminUsersFormService","adminUsersService","rejectWithErrorNotification"],n.module("linagora.esn.admin").controller("adminUsersQuickFormController",e)}(angular)},nMuy:function(n,e){!function(n){"use strict";function e(n,e,a,t,i){return{create:function(o){if(!o)return e.reject(new Error("Domain is required"));return a({progressing:"Creating domain...",success:"Domain created",failure:"Failed to create domain"},(function(){return function(n){return t.create(n).then((function(n){return n.data}))}(o)})).then((function(e){n.$broadcast(i.DOMAIN_CREATED,e)}))},update:function(e){return a({progressing:"Updating domain...",success:"Domain updated",failure:"Failed to update domain"},(function(){return t.update(e)})).then((function(){n.$broadcast(i.DOMAIN_UPDATED,e)}))}}}e.$inject=["$rootScope","$q","asyncAction","domainAPI","ADMIN_DOMAINS_EVENTS"],n.module("linagora.esn.admin").factory("adminDomainsService",e)}(angular)},nkTr:function(n,e,a){"use strict";angular.module("linagora.esn.admin").factory("adminUsersService",["_","$rootScope","domainAPI","asyncAction","adminDomainConfigService","ADMIN_USERS_EVENTS",function(n,e,a,t,i,o){return{createMember:function(n,i){return t({progressing:"Creating user...",success:"User created",failure:"Failed to create user"},(function(){return a.createMember(n,i)})).then((function(n){e.$broadcast(o.CREATE,n.data)}))},isUserCreationEnabled:function(e){return function(e){return i.get(e,"ldap").then((function(e){return!e||(a=n.isArray(e)?e:[e],!n.some(a,(function(n){return n&&n.usage&&n.usage.auth})));var a}))}(e)}}}])},oQ3l:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminUsersQuickForm",{templateUrl:"/admin/app/users/form/admin-users-quick-form.html",controller:"adminUsersQuickFormController",bindings:{domainId:"="}})},oRmL:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminOauthFacebook",{templateUrl:"/admin/app/oauth/facebook/admin-oauth-facebook.html",bindings:{config:"=",isEnabled:"="}})}(angular)},ozOz:function(n,e){!function(n){"use strict";function e(n){this.openCreateForm=function(){n({templateUrl:"/admin/app/domains/create/admin-domains-create.html",backdrop:"static",placement:"center",controllerAs:"$ctrl",controller:"adminDomainsCreateController"})}}e.$inject=["$modal"],n.module("linagora.esn.admin").controller("adminDomainsController",e)}(angular)},ozb1:function(n,e){!function(n){"use strict";function e(n,e,a,t,i,o,r,s){var l=this,u={domain:["homePage","businessHours","datetime","language"],platform:["homePage","businessHours","datetime"]};function m(){var a=function(n){var e=[];return o.forEach(n,(function(n,a){e.push({name:a,value:n})})),e}(l.configs);return e.setMultiple(n.domainId,a)}l.$onInit=function(){e.getMultiple(n.domainId,t.isPlatformMode()?u.platform:u.domain).then((function(n){l.mode=t.getCurrentMode(),l.configs=n,l.status=s.loaded,l.mode=t.getCurrentMode()})).catch((function(){l.status=s.error})),l.homePages=i.getHomePageCandidates()},l.save=function(){return a(r,m)},l.status=s.loading}e.$inject=["$stateParams","adminDomainConfigService","asyncAction","adminModeService","homePageService","_","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS"],n.module("linagora.esn.admin").controller("adminGeneralController",e)}(angular)},p8TH:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").controller("adminTechnicalUsersListController",["$rootScope","$stateParams","$modal","esnTechnicalUserAPIClient","infiniteScrollHelper","ELEMENTS_PER_REQUEST","ADMIN_TECHNICAL_USERS_EVENTS",function(n,e,a,t,i,o,r){var s=this,l=o||20,u={offset:0,limit:l};function m(){return u.offset=s.elements.length,t.list(s.domainId,u)}function c(n,e){s.elements.push(e)}function d(n,e){s.elements=s.elements.map((function(n){return n._id===e._id?e:n}))}function f(n,e){s.elements=s.elements.filter((function(n){return n._id!==e}))}s.domainId=e.domainId,s.showUpdateModal=function(n){a({templateUrl:"/admin/app/technical-users/update/admin-technical-users-update.html",backdrop:"static",placement:"center",controllerAs:"$ctrl",controller:"adminTechnicalUsersUpdateController",locals:{technicalUser:n}})},s.showRemoveModal=function(n){a({templateUrl:"/admin/app/technical-users/remove/admin-technical-users-remove.html",backdrop:"static",placement:"center",controllerAs:"$ctrl",controller:"adminTechnicalUsersRemoveController",locals:{technicalUser:n}})},s.$onInit=function(){s.loadMoreElements=i(s,m,null,l),n.$on(r.ADDED,c),n.$on(r.REMOVED,f),n.$on(r.UPDATED,d)}}])}(angular)},pGMC:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminAutoconf",{templateUrl:"/admin/app/autoconf/admin-autoconf.html",controller:"adminAutoconfController"})}(angular)},pmPi:function(n,e){!function(n){"use strict";function e(n,e){return{get:function(n,e){return a(n,[e]).then((function(n){return n[e]}))},set:function(n,e,a){return t(n,[{name:e,value:a}])},getMultiple:a,setMultiple:t};function a(a,t){var i=[{name:"core",keys:t}];return n.get(a,i).then((function(n){var a=e.find(n,{name:"core"}),t={};return a&&e.forEach(a.configurations,(function(n){t[n.name]=n.value})),t}))}function t(e,a){var t=[{name:"core",configurations:a}];return n.set(e,t)}}e.$inject=["adminConfigApi","_"],n.module("linagora.esn.admin").factory("adminDomainConfigService",e)}(angular)},pz6U:function(n,e){!function(n){"use strict";function e(n,e){return{emailAvailabilityChecker:function(a){return e.checkEmailAvailability(a).then((function(e){if(!e.available)return n.reject(new Error(e.message))}))}}}e.$inject=["$q","esnAvailabilityService"],n.module("linagora.esn.admin").factory("adminUsersFormService",e)}(angular)},qJja:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminUsersCreateSubheader",{templateUrl:"/admin/app/users/create/admin-users-create-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})},"qk+S":function(n,e,a){"use strict";angular.module("linagora.esn.admin").controller("adminUsersController",["$log","$stateParams","adminUsersService",function(n,e,a){var t=this;t.$onInit=function(){a.isUserCreationEnabled(t.domainId).then((function(n){t.displayUserCreation=n})).catch((function(e){n.error("Can not check if user creation is enabled",e)}))},t.displayUserCreation=!1,t.domainId=e.domainId}])},r98x:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").controller("adminLdapController",["$stateParams","$element","$timeout","elementScrollService","adminDomainConfigService","asyncAction","_","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i,o,r,s,l){var u=this,m=n.domainId;u.$onInit=function(){i.get(m,"ldap").then((function(n){n?r.isArray(n)?u.configs=n:u.configs=[n]:u.configs=[],u.status=l.loaded})).catch((function(){u.status=l.error}))},u.save=function(){var n=function(){var n=u.configs;if(n&&n.length)return n.filter((function(n){if(n&&n.name&&!n.deleted)return delete n.deleted,n}))}();return o(s,(function(){return function(n){return i.set(m,"ldap",n)}(n)})).then((function(){u.configs=n}))},u.addForm=function(){u.configs.push({}),a((function(){var n=r.last(e.find("admin-ldap-form"));t.scrollDownToElement($(n))}),0)},u.showEmptyMessage=function(n){if(!n)return!0;return!n.some((function(n){return n.name||!n.deleted}))},u.status=l.loading}])}(angular)},rHYB:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminUsersList",{templateUrl:"/admin/app/users/list/admin-users-list.html",controller:"adminUsersListController",bindings:{domainId:"="}})},rrId:function(n,e){!function(n){"use strict";function e(e,a,t,i,o,r){var s,l=this,u=e.domainId;function m(){var n=function(n){var e=[];return a.forEach(n,(function(n,a){e.push({name:a,value:n})})),e}(l.configs);return i.setMultiple(u,n)}l.$onInit=function(){i.getMultiple(u,["membersCanBeSearched"]).then((function(e){s=n.copy(e),l.configs=e,l.configs.membersCanBeSearched=!1!==l.configs.membersCanBeSearched,l.status=r.loaded})).catch((function(){l.status=r.error}))},l.save=function(){return t(o,m).catch((function(){l.configs=n.copy(s)}))},l.status=r.loading}e.$inject=["$stateParams","_","asyncAction","adminDomainConfigService","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS"],n.module("linagora.esn.admin").controller("AdminUsersConfigurationController",e)}(angular)},s1if:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminRoles",{templateUrl:"/admin/app/roles/admin-roles.html",controller:"adminRolesController"})},sE2v:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminSession",{templateUrl:"/admin/app/session/admin-session.html",controller:"adminSessionController"})}(angular)},sEeI:function(n,e){!function(n){"use strict";function e(n,e){var a=this;a.$onInit=function(){a.hostnames=(a.domain.hostnames||[]).map((function(n){return{name:n}}))},a.addHostname=function(){a.hostnames.push({name:""})},a.deleteHostname=function(n){a.hostnames.splice(n,1),a.qualifyHostnames()},a.ensureUniqueHostname=function(t){if(!t)return n.reject(new Error("Hostname is required"));if(!a.form.$dirty)return n.resolve();if(a.hostnames.some((function(n){return t===n.name})))return n.reject(new Error("Hostname is already in use by this domain"));return e.list({hostname:t}).then((function(e){var t=e.data[0];if(t&&t.id!==a.domain.id)return n.reject(new Error("Hostname is already in use by another domain"))}))},a.qualifyHostnames=function(){a.domain.hostnames=a.hostnames.map((function(n){return n.name}))}}e.$inject=["$q","domainAPI"],n.module("linagora.esn.admin").controller("adminDomainsHostnamesController",e)}(angular)},srJ3:function(n,e){!function(){"use strict";angular.module("linagora.esn.admin").component("adminResourcesSubheader",{templateUrl:"/admin/app/resources/admin-resources-subheader.html"})}()},t7L5:function(n,e){!function(n){"use strict";function e(n,e){var a=this;a.$onInit=function(){a.mode=e.getCurrentMode(),a.maintenanceModules=n.getMaintenanceModules().filter((function(n){return n.maintenance.displayIn[a.mode]}))}}e.$inject=["adminMaintenanceService","adminModeService"],n.module("linagora.esn.admin").controller("adminMaintenanceController",e)}(angular)},tQkD:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminMaintenanceElasticsearchResource",{templateUrl:"/admin/app/maintenance/elasticsearch/resource/admin-maintenance-elasticsearch-resource.html",bindings:{resource:"<"}})}(angular)},tScq:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminMailGmail",{templateUrl:"/admin/app/mail/transport/admin-mail-gmail.html",bindings:{transportConfig:"=",form:"="}})},tSnq:function(n,e){angular.module("linagora.esn.admin").directive("adminFormMultiInput",(function(){return{restrict:"E",templateUrl:"/admin/app/common/form/admin-form-multi-input.html",controller:"adminFormMultiInputController",controllerAs:"$ctrl",scope:{ngModel:"=",availableTypes:"=",requiredTypes:"="}}}))},tdrT:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminMailLocal",{templateUrl:"/admin/app/mail/transport/admin-mail-local.html",bindings:{transport:"=",form:"="}})},tn0S:function(n,e){!function(n){"use strict";function e(e,a,t,i,o,r,s,l,u){var m=this,c=e.domainId,d=[];m.$onInit=function(){m.mode=r.getCurrentMode(),m.availableModes=s,m.configurations=function(e){if(function(n){return n.config&&n.config.configurations&&n.config.configurations.length>0}(e)){var a={};return n.forEach(e.config.configurations,(function(n){a[n.name]=n})),a}return!1}(m.module),m.currentEnabledState=!!m.module.enabled,m.module.isSVG=m.module.icon.match("(.*/)*.+.(svg)$")},m.registerPostSaveHandler=function(n){d.push(n)},m.switchEnabledState=function(){if(m.module.enabled!==m.currentEnabledState){var n=m.currentEnabledState;return m.currentEnabledState=m.module.enabled,m.onModuleEnabledStateChange({module:m.module,enabled:m.module.enabled}).catch((function(){m.currentEnabledState=n}))}},m.save=function(){return i(u,(function(){return o.set(c,[m.module]).then((function(){return t.all(d.map((function(n){return n()})))})).then((function(){a.$broadcast(l.submit),a.form.$setPristine()}))}))},m.reset=function(){a.$broadcast(l.reset),a.form.$setPristine()}}e.$inject=["$stateParams","$scope","$q","asyncAction","adminModulesService","adminModeService","ADMIN_MODE","ADMIN_FORM_EVENT","ADMIN_DEFAULT_NOTIFICATION_MESSAGES"],n.module("linagora.esn.admin").controller("adminModulesDisplayerController",e)}(angular)},"u+Fj":function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminDomainsFormHostnames",{templateUrl:"/admin/app/domains/form/hostnames/admin-domains-form-hostnames.html",bindings:{domain:"=",form:"<"},controller:"adminDomainsHostnamesController"})}(angular)},vuCK:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminUsersCreate",{templateUrl:"/admin/app/users/create/admin-users-create.html",controller:"adminUsersCreateController"})},wHVt:function(n,e){!function(n){"use strict";function e(n,e,a,t,i){var o=this,r=n.domainId;function s(){return e.set(r,"login",o.config)}o.$onInit=function(){e.get(r,"login").then((function(n){o.config=n,o.status=i.loaded})).catch((function(){o.status=i.error}))},o.save=function(){return a(t,s)},o.status=i.loading}e.$inject=["$stateParams","adminDomainConfigService","asyncAction","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS"],n.module("linagora.esn.admin").controller("adminLoginController",e)}(angular)},wm4x:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminLoginSubheader",{templateUrl:"/admin/app/login/admin-login-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}(angular)},xiTc:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminGeneralSubheader",{templateUrl:"/admin/app/general/admin-general-subheader.html",bindings:{onFormSubmit:"&",form:"<"}})}(angular)},xsJv:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminTechnicalUsersList",{templateUrl:"/admin/app/technical-users/list/admin-technical-users-list.html",controller:"adminTechnicalUsersListController"})}(angular)},y5nE:function(n,e,a){"use strict";angular.module("linagora.esn.admin").component("adminRolesAutoComplete",{templateUrl:"/admin/app/roles/add/admin-roles-auto-complete.html",controller:"adminRolesAutoCompleteController",bindings:{newAdministrators:"="}})},yILD:function(n,e,a){"use strict";angular.module("linagora.esn.admin").constant("ADMIN_MAIL_TRANSPORT_TYPES",{local:"Local",smtp:"SMTP",gmail:"Gmail"}).controller("adminMailController",["$stateParams","adminDomainConfigService","adminMailService","asyncAction","ADMIN_MAIL_TRANSPORT_TYPES","ADMIN_DEFAULT_NOTIFICATION_MESSAGES","ADMIN_LOADING_STATUS",function(n,e,a,t,i,o,r){var s=this,l=n.domainId;s.transportTypes=i,s.status=r.loading,e.get(l,"mail").then((function(n){s.config=n||{},s.transportType=a.getTransportType(s.config),s.status=r.loaded})).catch((function(){s.status=r.error})),s.save=function(){var n=a.qualifyTransportConfig(s.transportType,s.config);return t(o,(function(){return function(n){return e.set(l,"mail",n)}(n)}))}}])},yS7f:function(n,e){!function(n){"use strict";n.module("linagora.esn.admin").component("adminWebserver",{templateUrl:"/admin/app/webserver/admin-webserver.html",controller:"adminWebserverController"})}(angular)},zWzc:function(n,e,a){"use strict";angular.module("linagora.esn.admin").directive("adminApplicationMenu",["applicationMenuTemplateBuilder",function(n){return{restrict:"E",replace:!0,template:n("/#/admin",{url:"/admin/images/admin-center-icon.svg"},"Administration")}}])}});